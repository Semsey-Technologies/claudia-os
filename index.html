<!DOCTYPE html>
<html>
<head>
    <title>Claudia OS</title>
    <style>
        body { margin:0; overflow:hidden; background:#000; color:#00FFCC; font-family:'Courier New', monospace; user-select:none; }

        /* SCREENS */
        .screen { display:none; position:fixed; top:0; left:0; width:100%; height:100%; flex-direction:column; align-items:center; justify-content:center; }
        #splash { display:flex; z-index:900; background:#000; }
        #permissions { background:#050505; z-index:800; }
        #login { background:#050505; z-index:700; }
        #desktop { z-index:100; padding:50px 20px; box-sizing:border-box; }

        /* ELEMENTS */
        .logo { font-size:40px; letter-spacing:5px; animation:flicker 2s infinite; }
        @keyframes flicker { 0%{opacity:1;} 50%{opacity:0.8;} 100%{opacity:1;} }

        .box { border:1px solid #00FFCC; padding:30px; text-align:center; width:300px; background:rgba(0,255,204,0.05); }
        button { background:#00FFCC; color:black; border:none; padding:10px 20px; font-weight:bold; cursor:pointer; margin-top:20px; width:100%; }
        input { background:black; color:#00FFCC; border:1px solid #333; padding:10px; width:100%; box-sizing:border-box; text-align:center; margin-bottom:10px; }

        /* DESKTOP GRID */
        .grid { display:grid; grid-template-columns:repeat(4, 1fr); gap:15px; width:100%; }
        .app { text-align:center; }
        .icon { width:60px; height:60px; border:1px solid #00FFCC; border-radius:12px; margin:0 auto 5px; display:flex; align-items:center; justify-content:center; }
        svg { width:32px; height:32px; fill:#00FFCC; }

    </style>
</head>
<body>

<div id="splash" class="screen">
    <div class="logo">CLAUDIA OS</div>
    <div style="margin-top:20px; font-size:12px;">INITIALIZING KERNEL...</div>
</div>

<div id="permissions" class="screen">
    <div class="box">
        <h2>SYSTEM CHECK</h2>
        <p>REQUIRED PERMISSIONS MISSING</p>
        <button onclick="requestPerms()">GRANT ACCESS</button>
    </div>
</div>

<div id="login" class="screen">
    <div class="box">
        <h2>IDENTITY</h2>
        <input id="name" placeholder="USER">
        <input id="pin" type="number" placeholder="PIN">
        <button onclick="tryLogin()">AUTHENTICATE</button>
    </div>
</div>

<div id="desktop" class="screen">
    <div style="text-align:center; margin-bottom:40px;">
        <div style="font-size:60px; color:white;" id="clock">00:00</div>
        <div style="letter-spacing:2px;" id="welcome">SYSTEM READY</div>
    </div>

    <div class="grid">
        <div class="app" onclick="AndroidInterface.openAndroidSettings()">
            <div class="icon"><svg viewBox="0 0 24 24"><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg></div>
            <span>SETTINGS</span>
        </div>
    </div>
</div>

<script>
    // BOOT SEQ
    setTimeout(() => {
        document.getElementById('splash').style.display = 'none';
        // Simple check: If bridge exists, go to login. Real app might check specific perms.
        if(typeof AndroidInterface !== 'undefined') {
             showScreen('login');
        } else {
             showScreen('permissions'); // Bridge failed?
        }
    }, 2000);

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(el => el.style.display = 'none');
        document.getElementById(id).style.display = 'flex'; // flex for centering
        if(id === 'desktop') document.getElementById('desktop').style.display = 'block';
    }

    function requestPerms() {
        // Placeholder: Just reload or guide user
        location.reload();
    }

    function tryLogin() {
        const p = document.getElementById('pin').value;
        if(p === "0415") {
            if(typeof AndroidInterface !== 'undefined') AndroidInterface.attemptServerUnlock(p);
            showScreen('desktop');
            startClock();
        } else {
            alert("ACCESS DENIED");
        }
    }

    function startClock() {
        setInterval(() => {
            const d = new Date();
            document.getElementById('clock').innerText = d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit', hour12:false});
        }, 1000);
    }
</script>
</body>
</html>